
       $('body').on('click', '.chkBoxOge', function () {
           var satir = $(this).closest("tr");

           if (this.checked) {

               $(satir).addClass("warning");
               $('#btnCokluSil').prop('disabled', false);

           }
           else {
               $(satir).removeClass("warning");
           }

           var seciliOgeSayisi = 0;


           $('.chkBoxOge').each(function (id, jd) {

               if (this.checked) {

                   seciliOgeSayisi++;

               }

           });

           if (seciliOgeSayisi == 0) {
               $('#btnCokluSil').prop('disabled', true);
               $('#btnDerstePaylas').prop('disabled', true);
           }
           else {
               $('#btnCokluSil').prop('disabled', false);
               $('#btnDerstePaylas').prop('disabled', false);
           }




       });

    $('body').on('click', '.btnOgeSil', function () {
        var satir = $(this).closest("tr");
        var ogeID = $(this).attr('data-OgeID');
        if (confirm('Seçili öğe kalıcı olarak silinecek emin misiniz ?')) {
            $.ajax({
                type: 'POST',
                url: '/Ajax/Dosya/OgeSil',
                data: 'OgeID=' + ogeID,
                success: function (res) {
                    $(satir).animate({ backgroundColor: 'gray' }, 150).fadeOut(150, function () {
                        $(satir).remove()
                    });

                },
                error: function (res) {
                    HataMesaji('Öğe silinirken bir hata meydana geldi');
                    return false;
                }
            });
        }
    });

    $('body').on('click', '#btnCokluSil', function () {
        var silecekOgeler = '';
        $('.chkBoxOge').each(function () {
            if (this.checked) {
                silecekOgeler = silecekOgeler + $(this).attr("data-OgeID") + ",";
            }

        });
        silecekOgeler = silecekOgeler.substring(0, silecekOgeler.length - 1)
        if (silecekOgeler != "") {
            if (confirm('Seçili öğeler kalıcı olarak silinecek. Emin misiniz ?')) {
                $.ajax({
                    type: 'POST',
                    url: '/Ajax/Dosya/OgeSil',
                    data: {
                        OgeID: silecekOgeler
                    },
                    success: function (res) {
                        $('.chkBoxOge').each(function () {
                            if (this.checked) {
                                var satir = $(this).closest('tr');

                                $(satir).remove()

                            }
                        });



                    },
                    error: function (res) {
                        HataMesaji('Öğe silinirken bir hata meydana geldi');
                        return false;
                    }
                });
            }

        }

    });

     $('body').on('change', '.chkBoxDersSecOge', function () {
        var secili = this.checked;
      
        var satir = $(this).closest("tr");
        if (secili) {
            $(satir).addClass("warning");
        }
        else {
            $(satir).removeClass("warning");
        }
    });


    $('#modalDersSec').on('shown.bs.modal', function (e) {
        VerilenDersleriGoster();
    });

    
    function VerilenDersleriGoster()
    {
              $('#spinnerIconDers').removeClass('hide');
              $('#tableVerilenDerslerListesi').addClass('hide');
              $.ajax({
                  url: '/Ajax/Ders/JsonVerilenDersler.cshtml',

                  dataType: 'json',
                  type: 'GET',
                  error: function (hata) {

                      return false;

                  },
                  success: function (res) {
                      
                      $('#tableVerilenDerslerListesi').empty();


                      for (var i = 0; i < res.length; i++) {

                          var eklenecekHtml = '';
                          eklenecekHtml = '<tr>' +
                '<td class="col-md-1 text-center">' +
                '<label>' +
                '<input type="checkbox" data-DersID="' + res[i].DersID + '" class="colored-primary chkBoxDersSecOge">' +
                '<span class="text"></span>' +
                '</label>' +
                '</td>' +
                '<td>' +
                '<button class="btn btn-link"><i class="fa fa-book fa-2x"></i>' + res[i].DersAdi + '</button>' +
                '</td>' +

                '</tr>';
                          $('#tableVerilenDerslerListesi').append(eklenecekHtml);

                      }
                      $('#spinnerIconDers').addClass('hide');
                      $('#tableVerilenDerslerListesi').removeClass('hide');
                  }
              });  
    }

    

    $('#btnDerstePaylasTamam').click(function () {

        var paylasilacakDersler = '';
        var paylasilacakDosyalar = '';

        $('.chkBoxOge').each(function () {
            if (this.checked) {
                paylasilacakDosyalar = paylasilacakDosyalar + $(this).attr("data-OgeID") + ",";
            }

        });
        paylasilacakDosyalar = paylasilacakDosyalar.substring(0, paylasilacakDosyalar.length - 1)

        if (paylasilacakDosyalar == "") {
            HataMesaji('Lütfen paylaşılmasını istediğiniz dosyaları seçin');
            return false;
        }


        $('.chkBoxDersSecOge').each(function () {
            if (this.checked) {
                paylasilacakDersler = paylasilacakDersler + $(this).attr("data-DersID") + ",";
            }

        });
        paylasilacakDersler = paylasilacakDersler.substring(0, paylasilacakDersler.length - 1)

        if (paylasilacakDersler == '') {
            HataMesaji('Lütfen paylaşılmasını istediğiniz dersleri seçin');
            return false;
        }

        $('#spinnerIconDers').removeClass('hide');
        $('#tableVerilenDerslerListesi').addClass('hide');

        $.ajax({
            type: 'POST',
            url: '/Ajax/Dosya/ErisimIzniVerDers',
            data: {
                DersID: paylasilacakDersler,
                DosyaID: paylasilacakDosyalar
            },
            success: function (res) {
                $('#spinnerIconDers').addClass('hide');
                $('#tableVerilenDerslerListesi').removeClass('hide');
                $('#modalDersSec').modal('hide');
                MesajKutusu(mesajlar.islemtamam, 'Dosyalar derse başarıyla paylaşıldı');

            },
            error: function (res) {
                HataMesaji('Dosyalar derste paylaşılırken bir hata meydana geldi');
                return false;
            }
        });




    });