 $body = $("body");

 $(document).on({
     ajaxStart: function () {

     },
     ajaxStop: function () {
         //setTimeout($.unblockUI, 100);

     }
 });
         
function MesajKutusu(baslik, metin) {
             
             $.growl({ title: '', message: metin });

}

function HataMesaji(metin) {
             
            $.growl.error({title:mesajlar.hata, message: metin});

          }
function Bildirim(metin)
{
    $.growl({ title: '', message: metin, location: 'bl' });
}

$('[rel="profilpopover"]').popover({
              container: 'body',
              html: true,
              content: function () {
                  var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
                  return clone;
              }
          }).click(function (e) {
              e.preventDefault();
          });

$('body').on('click', function (e) {
              $('[rel="profilpopover"]').each(function () {
                 
                  if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                      $(this).popover('hide');
                  }
              });
          });


$('[data-toggle="tooltip"]').tooltip();
var msj = '<p><i class="fa fa-spinner fa-spin"></i> ' + mesajlar.lutfenbekle +' </p>'

function UIBlock()
          {
              
              $.blockUI({ 
                  
                    css: { 
                        border: 'none', 
                        padding: '15px', 
                        
                        margin:'auto',
                        opacity:'.80', 
                        color: '#000' 
                        },

                        message: msj
                        
                        }); 
          }
function UIUnBlock()
          {
             setTimeout($.unblockUI, 100);
          }

function UIBlockProgress()
{
  $.blockUI({ message: $('#ajaxProgressBar') }); 
}



function GecerliURL(str) {
  var bicim = new RegExp('^(https?:\/\/)?'+ 
    '((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|'+ 
    '((\d{1,3}\.){3}\d{1,3}))'+ 
    '(\:\d+)?(\/[-a-z\d%_.~+]*)*'+ 
    '(\?[;&a-z\d%_.~+=-]*)?'+ 
    '(\#[-a-z\d_]*)?$','i'); 
  if(!bicim.test(str)) {
     return false;
  } else {
  return true;
  }
 }

function ProfilKucukKunyeHTML(UserID,Avatar,Unvan,Ad,Soyad,Onayli)
  {
      var onayliHtml = '';
      var unvanHtml = '';

      if (Unvan!=null)
      {
          unvanHtml = Unvan;
      }
      if (Onayli==1)
      {
          onayliHtml = '<i class="fa fa-check-circle" title="'+ mesajlar.kimligidogrulanmiskullanici +'"></i>';
      }
      var html = '<span><img src="http://bulutders.blob.core.windows.net/profilresimleri/' + Avatar + '" class="img-rounded" style="width:48px;height: 48px"> <a href="/Hesap/Profil?UserID=' + UserID +'"> ' + unvanHtml + ' ' + Ad + ' ' + Soyad + ' ' + onayliHtml + '</a></span>';
        
      return html;
  }

  var bestPictures = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
      queryTokenizer: Bloodhound.tokenizers.whitespace,

      remote: {
          url: '/Ajax/JsonAramaOneri.cshtml?sorgu=%QUERY',
          wildcard: '%QUERY'
      }

  });

$('#txtAra').typeahead(null, {
  name: 'AdSoyad',
  display: 'AdSoyad',
  source: bestPictures
});


$('#frmAra').on('submit', function (e) {
    $('#frmAra').attr('action', '/Arama');
});


String.format = function() {
    var theString = arguments[0];
    for (var i = 1; i < arguments.length; i++) {
        
        var regEx = new RegExp("\\{" + (i - 1) + "\\}", "gm");
        theString = theString.replace(regEx, arguments[i]);
    }
    
    return theString;
}
