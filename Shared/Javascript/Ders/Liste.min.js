$('#btnDersEkle').click(function () {

    var dersAdi = $('#txtDersAdi').val();
    var aciklama = $('#txtDersAciklama').val();
    var kabulSekli = $('#cmbKabulSekli').val();
    var aramalardaGoster = $('#cmbAramalardaGoster').val();

    if (dersAdi == '') {

        HataMesaji(mesajlar.dersadigirilmedi);
        $('#txtDersAdi').focus();
        return false;
    }
    $('#modalDersEkle').modal('hide');

    $.ajax({
        type: 'POST',
        url: '/ajax/Ders/Ekle',
        data: "DersAdi=" + encodeURIComponent(dersAdi) + "&Aciklama=" + encodeURIComponent(aciklama) + '&KabulSekli=' + kabulSekli + '&AramalardaGoster=' + aramalardaGoster,
        success: function (msg) {

            var eklenecekHtml = '';
            eklenecekHtml = '<tr>' +

                    '<td><h4><i class="fa fa-book"></i> <a href="/Ders/?DersID=' + msg.DersID + '"> ' + msg.DersAdi + ' </a></h4>  </td>' +
            '<td>' +

            '<div class="dropdown">' +


            '<button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-primary btn-xs">' +
            '<i class="fa fa-cog"></i>' +
            '<span class="caret"></span>' +
            '</button>' +

            '<ul class="dropdown-menu" aria-labelledby="dLabel">' +
            '<li><a href="/Ders/?DersID=' + msg.DersID + '"><i class="fa fa-search-plus"></i> ' + mesajlar.gozat + '</a></li>' +
            '<li><a href="/Ders/Ayarlar/?DersID=' + msg.DersID + '"><i class="fa fa-gear"></i> ' + mesajlar.ayarlar + '</a></li>' +
            '</ul>' +
            '</div>' +

            '</td>' +
            '<td>' + $('#divAktifKullaniciKucukKunye').html() + '</td>' +

            '<td>0</td>' +

            '<td><i class="fa fa-check-circle fa-2x text-success" title=""></i></td>' +

            '</tr>';
            
            $('#lstDersler tbody').prepend(eklenecekHtml);


            MesajKutusu(mesajlar.tamam, dersAdi + mesajlar.dersiolusturuldu);
            $('#txtDersAdi').val('');
            $('#txtDersAciklama').val('');

        },
        error: function (msg) {

            if (msg.status == 501) {
                HataMesaji(mesajlar.dersadibos);
            }

        }
    });

});


$('body').on('click', '.btnDersTakibiBirak', function () {

    var DersID = $(this).attr('data-DersID');

    var satir = $(this).closest('tr');
    if (confirm(mesajlar.derstakibirakilacak)) {

        $.ajax({
            type: 'POST',
            url: '/Ajax/DersTakip/TakibiBirak',
            data: "DersID=" + DersID,
            success: function (msg) {
                       $(satir).animate({ backgroundColor: 'gray' }, 150).fadeOut(150, function () {
                        $(satir).remove();
                    });

            },
            error: function (msg) {

                HataMesaji(mesajlar.islemsirasindahata);
            }
        });

    }
});

$('#btnDersAra').click(function () {
   
    $('#txtAra').focus();
});


$('#btnDerseKatil').click(function () {
    var erisimKodu = $('#txtErisimKodu').val();

    if (!erisimKodu) {
        HataMesaji(mesajlar.erisimkodugirilmedi);
        $('#txtErisimKodu').focus();
        return false;
    }
    console.log(erisimKodu);
    $.ajax({
        type: 'POST',
        url: '/Ajax/DersTakip/ErisimKoduIleDerseKatil',
        data: "ErisimKodu=" + erisimKodu,
        success: function (msg) {
            location.href = "/Ders/?DersID=" + msg;
        },
        error: function (msg) {

            HataMesaji(mesajlar.dersekatilimbasarisizoldu);
        }
    });
});


        

   