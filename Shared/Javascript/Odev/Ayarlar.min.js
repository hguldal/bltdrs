$(function () {

    $('#txtSonTeslimTarihi').daterangepicker({
        singleDatePicker: true,
        showDropdowns: true,
        format: ayarlar.dtformat,
        drops: 'down',
        buttonClasses: ['btn', 'btn-sm'],
        applyClass: 'btn-primary',
        cancelClass: 'btn-default',
        locale: ayarlar.dtpickerlocale
    },
    function (start, end, label) {

    });


    $('#txtSonTeslimTarihi').on('apply.daterangepicker', function (ev, picker) {

        var OdevID = $("#spnOdevID").attr("data-OdevID");
        var alan = 'SonTeslimTarihi';
       
        $.ajax({
            type: 'POST',
            url: '/Ajax/Odev/OdevAyarKaydet',
            data: "pk=" + OdevID + "&name=" + alan + "&value=" + picker.endDate.format(ayarlar.dtformat),
            success: function (msg) {
                 
                MesajKutusu(mesajlar.islemtamam, mesajlar.odevayarlarikaydedildi);

            },
            error: function (msg) {
                 
                HataMesaji(mesajlar.islemsirasindahata);
            }
        });
       

    });

    $('#lnkOdevMetni').editable(
    {
        pk: function () {
            return $("#spnOdevID").attr("data-OdevID")
        },

        name: 'Aciklama',

        url: '/Ajax/Odev/OdevAyarKaydet',

        display: function (value) {
            $(this).text(value + '');
        },

        success: function (msg) {

            MesajKutusu(mesajlar.islemtamam, mesajlar.odevayarlarikaydedildi);

        }
    });


    $('#lnkOdevBaslik').editable(
    {
        pk: function () {
            return $("#spnOdevID").attr("data-OdevID")
        },

        name: 'Baslik',

        url: '/Ajax/Odev/OdevAyarKaydet',

        display: function (value) {
            $(this).text(value + '');
        },

        success: function (msg) {

             MesajKutusu(mesajlar.islemtamam, mesajlar.odevayarlarikaydedildi);

        }
    });

    $('#cmbOdevGonderimi').change(function () {
       var OdevID = $("#spnOdevID").attr("data-OdevID");
        var alan = 'OdevGonderimi';
        $.ajax({
            type: 'POST',
            url: '/Ajax/Odev/OdevAyarKaydet',
            data: "pk=" + OdevID + "&name=" + alan + "&value=" + $('#cmbOdevGonderimi').val(),
            success: function (msg) {
                 MesajKutusu(mesajlar.islemtamam, mesajlar.odevayarlarikaydedildi);

            },
            error: function (msg) {
                HataMesaji(mesajlar.islemsirasindahata);
            }
        });
    });

});