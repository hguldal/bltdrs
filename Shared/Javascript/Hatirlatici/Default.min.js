$(document).ready(function () {


    var tabloGorevler = $('#lstGorevler').DataTable({
        "pagingType": "simple",
        "language": {
            "url": ayarlar.datatablelangurl
        },
        "bPaginate": true,
        "bLengthChange": false,
        "bFilter": false,
        "bInfo": false,
        "bSort": false
    });

    $('body').on('click', '.btnGorevTamamlandi', function () {

        var GorevID = $(this).attr('data-GorevID');
        var dugme = $(this);
        
        $.ajax({
            type: 'POST',
            url: '/Ajax/Hatirlatici/TamamlandiOlarakIsaretle',
            data: "GorevID=" + GorevID,
            success: function (msg) {
                dugme.removeClass('btnGorevTamamlandi');
                dugme.addClass('btnGorevTamamlanmadi');
                dugme.removeClass('btn-primary');
                dugme.addClass('btn-danger');
                var ikon = dugme.children('i');
                ikon.removeClass('fa-check');
                ikon.addClass('fa-undo');
                 
                MesajKutusu(mesajlar.islemtamam, mesajlar.gorevtamamlandiolarakisaretlendi);
            },
            error: function (msg) {
                 
                HataMesaji(mesajlar.islemsirasindahata);
            }
        });
       

    });

    $('body').on('click', '.btnGorevTamamlanmadi', function () {

        var GorevID = $(this).attr('data-GorevID');
        var dugme = $(this);
        
        $.ajax({
            type: 'POST',
            url: '/Ajax/Hatirlatici/TamamlanmadiOlarakIsaretle',
            data: "GorevID=" + GorevID,
            success: function (msg) {

                //dugme.hide();
                dugme.addClass('btnGorevTamamlandi');
                dugme.removeClass('btnGorevTamamlanmadi');
                dugme.addClass('btn-primary');
                dugme.removeClass('btn-danger');
                var ikon = dugme.children('i');
                ikon.addClass('fa-check');
                ikon.removeClass('fa-undo');
                 
                MesajKutusu(mesajlar.islemtamam, mesajlar.gorevtamamlanmadiolarakisaretlendi);
            },
            error: function (msg) {
                 
                HataMesaji(mesajlar.islemsirasindahata);
            }
        });
       

    });


    $('body').on('click', '.btnGorevSil', function () {

        var GorevID = $(this).attr('data-GorevID');
        var dugme = $(this);
        if (confirm(mesajlar.hatirlaticisilinecek)) {
           
            $.ajax({
                type: 'POST',
                url: '/Ajax/Hatirlatici/Sil',
                data: "GorevID=" + GorevID,
                success: function (msg) {
                    var row = tabloGorevler.row(dugme.parents('tr'));
                    row.remove().draw();
                     
                    MesajKutusu(mesajlar.islemtamam, mesajlar.hatirlaticisilindi);
                },
                error: function (msg) {
                     
                    HataMesaji(mesajlar.islemsirasindahata);
                }
            });
           
        }
    });

});